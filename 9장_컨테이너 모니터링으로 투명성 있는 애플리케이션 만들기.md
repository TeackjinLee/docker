-- 도커를 이용한 체계적인 모니터링, 프로메테우스(Prometheus)으로 애플리케이션 컨테이너에서 측정된 수치를 수집, 그라파나(Grafana)를 사용해 수치를 시각화해 이해하기 쉬운 대시보드 형태로 구성<br>

# 9.1 컨테이너화된 애플리케이션에서 사용되는 모니터링 기술 스택
<br>

![image](https://github.com/user-attachments/assets/769c2235-63cd-4dc3-9083-8f9a7b899fcf)

<br>
[실습] 설정 파일을 열고 다음 두 값을 추가하라<br>
"metrics-addr" : "0.0.0.0:9323",<br>
"experimental" : true<br>
<br>

[실습] 프로메테우스를 컨테이너에서 실행해 현재 도커를 실행 중인 컴퓨터의 정보를 수집해 보자. 이를 위해서는 먼저 현재 로컬 컴퓨터의 IP주소를 확인해야 한다.<br>
      컨테이너는 자신을 실행 중인 서버의 IP 주소를 알 수 없다. 따라서 이 정보를 컨테이너에 환경 변수 형태로 직접 전달해야 한다.<br>

> 로컬 컴퓨터의 IP주소를 확인해 환경 변수로 정의하기(윈도우)<br>
> $hostIP = $(Get-NetIPConfiguration | Where-Objetc {$_.IPv4DefaultGateway -ne $null }).IPv4Address.IPAddress<br>
> 로컬 컴퓨터의 IP주소를 확인해 환경 변수로 정의하기(linux)<br>
> hostIP=$(ip route get 1 | awk '{print $NF;exit}')<br>
> 로컬 컴퓨터의 IP주소를 확인해 환경 변수로 정의하기(macOS)<br>
> hostIP=$(ifconfig en0 | grep -e 'inet\s' | awk '{print $2}')<br>
> 환경 변수로 로컬 컴퓨터의 IP 주소를 전달해 컨테이너를 실행<br>
> docker container run -e DOCKER_HOST=$hostIP -d -p 9090:9090 diamol/prometheus:2.13.1<br>
<br>
우리가 할 일은 컨테이너 마다 측정값을 수집할 엔드포인트를 만들고 프로메테우스가 이들 엔드포인트에서 주기적으로 정보를 수집하게 하는 것이다. 이 정 도면 전체 시스템의 상태를 한눈에 알 수 있는 대시보드를 만드는 데 충분한 정보를 수집할 수 있다.

# 9.2 애플리케이션의 측정값 출력하기



# 9.3 측정값 수집을 맡을 프로메테우스 컨테이너 실행하기



# 9.4 측정값 시각화를 위한 그라파나 컨테이너 실행하기



# 9.5 투명성의 수준



# 9.6 연습문제
